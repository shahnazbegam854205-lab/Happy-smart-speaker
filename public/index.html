<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ò‡•ã‡§∑‡§£‡§æ‡§ï‡§∞‡•ç‡§§‡§æ</title>
    <meta name="theme-color" content="#0f172a">
    <link rel="manifest" href="/manifest.json">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Segoe UI', Arial, sans-serif; 
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); 
            min-height: 100vh; 
            color: #e2e8f0; 
        }
        
        .container { max-width: 900px; margin: 0 auto; padding: 15px; }
        
        /* HEADER - GLOW EFFECT */
        header { 
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9) 0%, rgba(30, 41, 59, 0.9) 100%);
            padding: 30px; 
            border-radius: 25px 25px 0 0; 
            text-align: center; 
            box-shadow: 
                0 0 20px rgba(56, 189, 248, 0.3),
                0 10px 40px rgba(0, 0, 0, 0.5),
                inset 0 1px 0 rgba(255, 255, 255, 0.1);
            margin-bottom: 5px; 
            border: 1px solid rgba(56, 189, 248, 0.2);
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(56, 189, 248, 0.1) 0%, transparent 70%);
            animation: pulse 4s infinite alternate;
        }
        
        @keyframes pulse {
            0% { opacity: 0.3; }
            100% { opacity: 0.7; }
        }
        
        h1 { 
            color: #38bdf8; 
            font-size: 3rem; 
            margin-bottom: 10px; 
            text-shadow: 
                0 0 10px rgba(56, 189, 248, 0.5),
                0 0 20px rgba(56, 189, 248, 0.3),
                0 0 30px rgba(56, 189, 248, 0.1);
            letter-spacing: 1px;
        }
        
        .subtitle { 
            color: #94a3b8; 
            font-size: 1.3rem; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        /* MAIN CARD */
        .main-card { 
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%);
            padding: 30px; 
            border-radius: 0 0 25px 25px; 
            box-shadow: 
                0 15px 50px rgba(0, 0, 0, 0.4),
                inset 0 1px 0 rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(56, 189, 248, 0.1);
        }
        
        /* STATUS - NEON CARDS */
        .status-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            margin-bottom: 30px; 
        }
        
        .status-box { 
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%);
            padding: 25px; 
            border-radius: 20px; 
            border: 1px solid rgba(56, 189, 248, 0.2);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .status-box::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(56, 189, 248, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .status-box:hover::before {
            left: 100%;
        }
        
        .status-box.active { 
            border-color: #10b981;
            box-shadow: 0 0 15px rgba(16, 185, 129, 0.3);
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(30, 41, 59, 0.9) 100%);
        }
        
        .status-box.inactive { 
            border-color: #ef4444;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.3);
            background: linear-gradient(135deg, rgba(239, 68, 68, 0.1) 0%, rgba(30, 41, 59, 0.9) 100%);
        }
        
        .status-box.waiting { 
            border-color: #f59e0b;
            box-shadow: 0 0 15px rgba(245, 158, 11, 0.3);
        }
        
        .status-title { 
            font-size: 13px; 
            color: #94a3b8; 
            text-transform: uppercase; 
            letter-spacing: 1.5px; 
            margin-bottom: 12px; 
            font-weight: 600;
        }
        
        .status-value { 
            font-size: 18px; 
            font-weight: 800; 
            color: #f1f5f9; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        /* BUTTONS - GLOWING */
        .btn-group { 
            display: grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap: 20px; 
            margin-bottom: 30px; 
        }
        
        .btn { 
            padding: 20px; 
            border: none; 
            border-radius: 15px; 
            font-size: 18px; 
            font-weight: 700; 
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            gap: 15px; 
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            text-shadow: 0 1px 2px rgba(0,0,0,0.3);
            letter-spacing: 0.5px;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .btn:hover::before {
            left: 100%;
        }
        
        .btn:hover { 
            transform: translateY(-5px); 
            box-shadow: 0 15px 30px rgba(0,0,0,0.4); 
        }
        
        .btn:active {
            transform: translateY(-2px);
        }
        
        .btn-primary { 
            background: linear-gradient(135deg, #3b82f6, #1d4ed8); 
            color: white; 
            box-shadow: 0 5px 15px rgba(59, 130, 246, 0.3);
        }
        
        .btn-primary:hover {
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.5);
        }
        
        .btn-secondary { 
            background: linear-gradient(135deg, #f59e0b, #d97706); 
            color: white; 
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }
        
        .btn-secondary:hover {
            box-shadow: 0 10px 25px rgba(245, 158, 11, 0.5);
        }
        
        .btn-success { 
            background: linear-gradient(135deg, #10b981, #059669); 
            color: white; 
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }
        
        .btn-success:hover {
            box-shadow: 0 10px 25px rgba(16, 185, 129, 0.5);
        }
        
        .btn-danger { 
            background: linear-gradient(135deg, #ef4444, #dc2626); 
            color: white; 
            box-shadow: 0 5px 15px rgba(239, 68, 68, 0.3);
        }
        
        .btn-danger:hover {
            box-shadow: 0 10px 25px rgba(239, 68, 68, 0.5);
        }
        
        .btn-info { 
            background: linear-gradient(135deg, #06b6d4, #0e7490); 
            color: white; 
            box-shadow: 0 5px 15px rgba(6, 182, 212, 0.3);
        }
        
        .btn-info:hover {
            box-shadow: 0 10px 25px rgba(6, 182, 212, 0.5);
        }
        
        .btn-icon { 
            font-size: 24px; 
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }
        
        /* INSTALL SECTION */
        .install-section { 
            background: linear-gradient(135deg, rgba(245, 158, 11, 0.9), rgba(217, 119, 6, 0.9)); 
            color: white; 
            padding: 25px; 
            border-radius: 20px; 
            margin: 25px 0; 
            display: none; 
            text-align: center; 
            animation: fadeIn 0.5s;
            box-shadow: 0 10px 30px rgba(245, 158, 11, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .install-section.show { display: block; }
        
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(-20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        /* SETTINGS SECTION */
        .settings-section { 
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%);
            padding: 25px; 
            border-radius: 20px; 
            margin-bottom: 30px;
            border: 1px solid rgba(56, 189, 248, 0.1);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
        }
        
        .setting-item {
            background: rgba(15, 23, 42, 0.5);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(56, 189, 248, 0.1);
        }
        
        /* PAYMENTS - GLOW CARDS */
        .payments-section { 
            margin: 30px 0; 
        }
        
        .section-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 25px; 
            padding-bottom: 20px; 
            border-bottom: 2px solid rgba(56, 189, 248, 0.2); 
        }
        
        .section-header h3 { 
            color: #38bdf8; 
            font-size: 2rem; 
            text-shadow: 0 0 10px rgba(56, 189, 248, 0.3);
        }
        
        .payments-list { 
            max-height: 450px; 
            overflow-y: auto; 
            padding-right: 10px; 
        }
        
        .payment-card { 
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.8) 0%, rgba(15, 23, 42, 0.8) 100%);
            padding: 25px; 
            margin-bottom: 15px; 
            border-radius: 20px; 
            border-left: 6px solid #10b981; 
            animation: slideIn 0.5s ease;
            border: 1px solid rgba(56, 189, 248, 0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .payment-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(56, 189, 248, 0.05), transparent);
            transition: left 0.5s;
        }
        
        .payment-card:hover::before {
            left: 100%;
        }
        
        .payment-card:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
        }
        
        .payment-card.debit {
            border-left-color: #ef4444;
        }
        
        @keyframes slideIn { 
            from { opacity: 0; transform: translateX(-30px); } 
            to { opacity: 1; transform: translateX(0); } 
        }
        
        .payment-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 15px; 
        }
        
        .payment-amount { 
            font-size: 36px; 
            font-weight: 900; 
            color: #10b981; 
            text-shadow: 
                0 0 10px rgba(16, 185, 129, 0.3),
                0 0 20px rgba(16, 185, 129, 0.1);
            letter-spacing: 1px;
        }
        
        .payment-card.debit .payment-amount {
            color: #ef4444;
            text-shadow: 
                0 0 10px rgba(239, 68, 68, 0.3),
                0 0 20px rgba(239, 68, 68, 0.1);
        }
        
        .payment-sender { 
            font-size: 20px; 
            font-weight: 700; 
            color: #38bdf8; 
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .payment-details { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 20px; 
            font-size: 16px; 
            color: #cbd5e1; 
        }
        
        /* LOGS - TERMINAL STYLE */
        .logs-section { 
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95) 0%, rgba(0, 0, 0, 0.95) 100%);
            color: #10b981; 
            padding: 25px; 
            border-radius: 20px; 
            margin-top: 30px;
            border: 1px solid rgba(16, 185, 129, 0.2);
            box-shadow: 
                0 10px 30px rgba(0, 0, 0, 0.5),
                inset 0 0 20px rgba(16, 185, 129, 0.05);
        }
        
        .logs-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            margin-bottom: 20px; 
        }
        
        .logs-header h3 { 
            color: #10b981; 
            font-size: 1.8rem; 
            text-shadow: 0 0 10px rgba(16, 185, 129, 0.3);
        }
        
        .logs-list { 
            font-family: 'Monaco', 'Menlo', 'Consolas', monospace; 
            font-size: 14px; 
            max-height: 250px; 
            overflow-y: auto; 
            background: rgba(0, 0, 0, 0.5); 
            padding: 20px; 
            border-radius: 15px; 
            border: 1px solid rgba(16, 185, 129, 0.1);
        }
        
        .log-entry { 
            padding: 8px 0; 
            border-bottom: 1px solid rgba(16, 185, 129, 0.1); 
            animation: logFade 0.3s ease;
        }
        
        @keyframes logFade {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .log-time { 
            color: #38bdf8; 
            margin-right: 15px; 
            font-weight: 600;
        }
        
        /* TOAST - GLOWING */
        .toast { 
            position: fixed; 
            bottom: 30px; 
            right: 30px; 
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.9), rgba(5, 150, 105, 0.9)); 
            color: white; 
            padding: 20px 35px; 
            border-radius: 15px; 
            box-shadow: 
                0 15px 40px rgba(0,0,0,0.4),
                0 0 20px rgba(16, 185, 129, 0.3); 
            z-index: 10000; 
            display: none; 
            animation: slideInRight 0.4s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        @keyframes slideInRight { 
            from { transform: translateX(100%); opacity: 0; } 
            to { transform: translateX(0); opacity: 1; } 
        }
        
        /* RESPONSIVE */
        @media (max-width: 768px) {
            .container { padding: 10px; }
            .status-grid, .btn-group { grid-template-columns: 1fr; }
            .payment-details { grid-template-columns: 1fr; }
            h1 { font-size: 2.5rem; }
            .btn { padding: 18px; }
        }
        
        /* UTILITY */
        .hidden { display: none !important; }
        .badge { 
            background: linear-gradient(135deg, #10b981, #059669); 
            color: white; 
            padding: 6px 15px; 
            border-radius: 20px; 
            font-size: 14px; 
            font-weight: bold;
            box-shadow: 0 3px 10px rgba(16, 185, 129, 0.3);
        }
        
        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 10px; }
        ::-webkit-scrollbar-track { 
            background: rgba(15, 23, 42, 0.5); 
            border-radius: 10px; 
        }
        ::-webkit-scrollbar-thumb { 
            background: linear-gradient(135deg, #38bdf8, #0ea5e9); 
            border-radius: 10px; 
        }
        ::-webkit-scrollbar-thumb:hover { 
            background: linear-gradient(135deg, #0ea5e9, #0284c7); 
        }
        
        /* GLOW ANIMATIONS */
        .glow-text {
            text-shadow: 0 0 10px currentColor;
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        /* FOOTER */
        footer {
            text-align: center;
            padding: 25px;
            color: #94a3b8;
            margin-top: 25px;
            border-top: 1px solid rgba(56, 189, 248, 0.1);
        }
        
        /* CHECKBOX STYLING */
        input[type="checkbox"] {
            appearance: none;
            width: 24px;
            height: 24px;
            background: rgba(15, 23, 42, 0.8);
            border: 2px solid #38bdf8;
            border-radius: 6px;
            cursor: pointer;
            position: relative;
            transition: all 0.3s;
        }
        
        input[type="checkbox"]:checked {
            background: #38bdf8;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }
        
        input[type="checkbox"]:checked::after {
            content: '‚úì';
            position: absolute;
            color: white;
            font-size: 16px;
            font-weight: bold;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        /* SELECT STYLING */
        select {
            background: rgba(15, 23, 42, 0.8);
            color: #e2e8f0;
            border: 2px solid #38bdf8;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        select:focus {
            outline: none;
            box-shadow: 0 0 10px rgba(56, 189, 248, 0.5);
        }
        
        option {
            background: #0f172a;
            color: #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- HEADER -->
        <header>
            <h1 class="glow-text">üí∞ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ò‡•ã‡§∑‡§£‡§æ‡§ï‡§∞‡•ç‡§§‡§æ</h1>
            <p class="subtitle">‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ò‡•ã‡§∑‡§£‡§æ - ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à</p>
        </header>
        
        <!-- INSTALL PROMPT -->
        <div class="install-section" id="installPrompt">
            <div style="font-size: 24px; margin-bottom: 15px; color: white;">üì± ‡§ê‡§™ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</div>
            <p style="margin-bottom: 20px; opacity: 0.9;">‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ê‡§™ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç</p>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button id="installNowBtn" class="btn btn-success">
                    <span class="btn-icon">üì±</span> ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ï‡§∞‡•á‡§Ç
                </button>
                <button id="installLaterBtn" class="btn" style="background: rgba(255,255,255,0.1); color: white; border: 2px solid rgba(255,255,255,0.2);">
                    ‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç
                </button>
            </div>
        </div>
        
        <!-- MAIN CARD -->
        <div class="main-card">
            <!-- STATUS -->
            <div class="status-grid">
                <div class="status-box waiting" id="apiStatusBox">
                    <div class="status-title">‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</div>
                    <div class="status-value" id="apiStatusText">‡§ú‡§æ‡§Å‡§ö ‡§π‡•ã ‡§∞‡§π‡•Ä...</div>
                </div>
                <div class="status-box waiting" id="ttsStatusBox">
                    <div class="status-title">‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•ç‡§•‡§ø‡§§‡§ø</div>
                    <div class="status-value" id="ttsStatusText">‡§ú‡§æ‡§Å‡§ö ‡§π‡•ã ‡§∞‡§π‡•Ä...</div>
                </div>
                <div class="status-box inactive" id="monitorStatusBox">
                    <div class="status-title">‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä</div>
                    <div class="status-value" id="monitorStatusText">‡§¨‡§Ç‡§¶ ‡§π‡•à</div>
                </div>
            </div>
            
            <!-- BUTTONS -->
            <div class="btn-group">
                <button id="startBtn" class="btn btn-primary">
                    <span class="btn-icon">‚ñ∂</span>
                    ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∂‡•Å‡§∞‡•Ç
                </button>
                <button id="testCreditBtn" class="btn btn-success">
                    <span class="btn-icon">üí≥</span>
                    ‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ü‡•á‡§∏‡•ç‡§ü
                </button>
                <button id="testDebitBtn" class="btn btn-danger">
                    <span class="btn-icon">üí∏</span>
                    ‡§°‡•á‡§¨‡§ø‡§ü ‡§ü‡•á‡§∏‡•ç‡§ü
                </button>
                <button id="backgroundBtn" class="btn btn-info">
                    <span class="btn-icon">üîÑ</span>
                    ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°
                </button>
            </div>
            
            <!-- SETTINGS -->
            <div class="settings-section">
                <h3 style="margin-bottom: 20px; color: #38bdf8; text-shadow: 0 0 10px rgba(56, 189, 248, 0.3);">‚öôÔ∏è ‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏</h3>
                <div class="settings-grid">
                    <div class="setting-item">
                        <label style="display: block; margin-bottom: 8px; font-weight: 600; color: #e2e8f0;">
                            ‡§ö‡•á‡§ï ‡§Ö‡§Ç‡§§‡§∞‡§æ‡§≤:
                        </label>
                        <select id="intervalSelect" style="width: 100%;">
                            <option value="2000" selected>2 ‡§∏‡•á‡§ï‡§Ç‡§°</option>
                            <option value="5000">5 ‡§∏‡•á‡§ï‡§Ç‡§°</option>
                            <option value="10000">10 ‡§∏‡•á‡§ï‡§Ç‡§°</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label style="display: flex; align-items: center; gap: 15px; color: #e2e8f0; cursor: pointer;">
                            <input type="checkbox" id="autoStartToggle" checked>
                            <span>‡§ë‡§ü‡•ã-‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label style="display: flex; align-items: center; gap: 15px; color: #e2e8f0; cursor: pointer;">
                            <input type="checkbox" id="voiceToggle" checked>
                            <span>‡§ë‡§ü‡•ã ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ò‡•ã‡§∑‡§£‡§æ</span>
                        </label>
                    </div>
                    <div class="setting-item">
                        <label style="display: flex; align-items: center; gap: 15px; color: #e2e8f0; cursor: pointer;">
                            <input type="checkbox" id="backgroundToggle" checked>
                            <span>‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- PAYMENTS -->
            <div class="payments-section">
                <div class="section-header">
                    <h3>üí≥ ‡§π‡§æ‡§≤ ‡§ï‡•á ‡§≤‡•á‡§®-‡§¶‡•á‡§®</h3>
                    <div style="display: flex; align-items: center; gap: 20px;">
                        <span class="badge" id="paymentCount">0</span>
                        <button id="clearBtn" class="btn" style="padding: 12px 25px; background: linear-gradient(135deg, #64748b, #475569); color: white;">
                            ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç
                        </button>
                    </div>
                </div>
                <div class="payments-list" id="paymentsList">
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <div style="font-size: 72px; margin-bottom: 25px; opacity: 0.5;">üì≠</div>
                        <p style="font-size: 20px; margin-bottom: 15px;">‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§®‡§π‡•Ä‡§Ç</p>
                        <small>‡§ú‡•à‡§∏‡•á ‡§π‡•Ä ‡§®‡§Ø‡§æ SMS ‡§Ü‡§è‡§ó‡§æ, ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ</small>
                    </div>
                </div>
            </div>
            
            <!-- LOGS -->
            <div class="logs-section">
                <div class="logs-header">
                    <h3>üìù ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø ‡§≤‡•â‡§ó</h3>
                    <button id="clearLogsBtn" class="btn" style="padding: 10px 20px; background: rgba(56, 189, 248, 0.1); color: #38bdf8; border: 1px solid rgba(56, 189, 248, 0.2);">
                        ‡§≤‡•â‡§ó ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç
                    </button>
                </div>
                <div class="logs-list" id="logsList">
                    <div class="log-entry" style="color: #10b981;">
                        <span class="log-time">[<span id="currentTime">10:30:45</span>]</span>
                        <span>‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...</span>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- FOOTER -->
        <footer>
            <p>‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ò‡•ã‡§∑‡§£‡§æ‡§ï‡§∞‡•ç‡§§‡§æ v3.0 | ‡§¨‡•à‡§ï‡§è‡§Ç‡§°: <span id="backendUrl" style="color: #38bdf8;">‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡§ø‡§Ç‡§ó...</span></p>
            <p style="font-size: 14px; opacity: 0.7; margin-top: 10px;">‡§ê‡§™ ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§≠‡•Ä ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à</p>
        </footer>
    </div>
    
    <!-- TOAST -->
    <div class="toast" id="toast"></div>
    
    <!-- SCRIPT -->
    <script>
        class SmartPaymentAnnouncer {
            constructor() {
                // üî• SET YOUR BACKEND URL HERE
                this.backendUrl = 'https://h4ppy-api-getway.vercel.app'; // CHANGE THIS
                
                this.isMonitoring = false;
                this.isBackgroundActive = false;
                this.monitorInterval = null;
                this.deferredPrompt = null;
                this.isStandalone = window.matchMedia('(display-mode: standalone)').matches;
                this.announcedIds = new Set();
                this.hindiVoice = null;
                this.serviceWorkerRegistration = null;
                this.isSpeaking = false;
                
                this.init();
            }
            
            async init() {
                console.log('üöÄ ‡§∏‡•ç‡§Æ‡§æ‡§∞‡•ç‡§ü ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ‡§ê‡§™ ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');
                this.updateTime();
                setInterval(() => this.updateTime(), 1000);
                
                this.cacheElements();
                this.setupEventListeners();
                await this.setupPWA();
                await this.setupServiceWorker();
                await this.setupHindiTTS();
                await this.checkBackend();
                this.loadSettings();
                
                // Auto-start monitoring
                if (localStorage.getItem('autoStart') !== 'false') {
                    setTimeout(() => this.startMonitoring(), 1000);
                }
                
                this.log('‚úÖ ‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ ‡§§‡•à‡§Ø‡§æ‡§∞ ‡§π‡•à - ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü ‡§ï‡•á ‡§∏‡§æ‡§•');
            }
            
            cacheElements() {
                this.elements = {
                    startBtn: document.getElementById('startBtn'),
                    testCreditBtn: document.getElementById('testCreditBtn'),
                    testDebitBtn: document.getElementById('testDebitBtn'),
                    backgroundBtn: document.getElementById('backgroundBtn'),
                    installPrompt: document.getElementById('installPrompt'),
                    installNowBtn: document.getElementById('installNowBtn'),
                    installLaterBtn: document.getElementById('installLaterBtn'),
                    clearBtn: document.getElementById('clearBtn'),
                    clearLogsBtn: document.getElementById('clearLogsBtn'),
                    paymentsList: document.getElementById('paymentsList'),
                    logsList: document.getElementById('logsList'),
                    paymentCount: document.getElementById('paymentCount'),
                    backendUrl: document.getElementById('backendUrl'),
                    toast: document.getElementById('toast'),
                    apiStatusBox: document.getElementById('apiStatusBox'),
                    apiStatusText: document.getElementById('apiStatusText'),
                    ttsStatusBox: document.getElementById('ttsStatusBox'),
                    ttsStatusText: document.getElementById('ttsStatusText'),
                    monitorStatusBox: document.getElementById('monitorStatusBox'),
                    monitorStatusText: document.getElementById('monitorStatusText'),
                    autoStartToggle: document.getElementById('autoStartToggle'),
                    voiceToggle: document.getElementById('voiceToggle'),
                    backgroundToggle: document.getElementById('backgroundToggle'),
                    intervalSelect: document.getElementById('intervalSelect')
                };
                
                this.elements.backendUrl.textContent = this.backendUrl;
            }
            
            setupEventListeners() {
                // Start/Stop monitoring
                this.elements.startBtn.addEventListener('click', () => {
                    this.isMonitoring ? this.stopMonitoring() : this.startMonitoring();
                });
                
                // Test credit
                this.elements.testCreditBtn.addEventListener('click', () => {
                    this.testCreditAnnouncement();
                });
                
                // Test debit
                this.elements.testDebitBtn.addEventListener('click', () => {
                    this.testDebitAnnouncement();
                });
                
                // Background button
                this.elements.backgroundBtn.addEventListener('click', () => {
                    this.toggleBackgroundMonitoring();
                });
                
                // Install buttons
                this.elements.installNowBtn.addEventListener('click', () => this.installPWA());
                this.elements.installLaterBtn.addEventListener('click', () => this.hideInstallPrompt());
                
                // Clear buttons
                this.elements.clearBtn.addEventListener('click', () => this.clearPayments());
                this.elements.clearLogsBtn.addEventListener('click', () => this.clearLogs());
                
                // Settings
                this.elements.autoStartToggle.addEventListener('change', (e) => {
                    localStorage.setItem('autoStart', e.target.checked);
                    this.showToast(e.target.checked ? '‡§ë‡§ü‡•ã-‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü ‡§∏‡§ï‡•ç‡§∑‡§Æ' : '‡§ë‡§ü‡•ã-‡§∏‡•ç‡§ü‡§æ‡§∞‡•ç‡§ü ‡§Ö‡§ï‡•ç‡§∑‡§Æ');
                });
                
                this.elements.voiceToggle.addEventListener('change', (e) => {
                    localStorage.setItem('autoVoice', e.target.checked);
                    this.showToast(e.target.checked ? '‡§ë‡§ü‡•ã ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡§ï‡•ç‡§∑‡§Æ' : '‡§ë‡§ü‡•ã ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§Ö‡§ï‡•ç‡§∑‡§Æ');
                });
                
                this.elements.backgroundToggle.addEventListener('change', (e) => {
                    localStorage.setItem('backgroundEnabled', e.target.checked);
                    if (e.target.checked && this.isMonitoring) {
                        this.enableBackgroundMonitoring();
                    }
                });
                
                this.elements.intervalSelect.addEventListener('change', (e) => {
                    localStorage.setItem('checkInterval', e.target.value);
                    if (this.isMonitoring) {
                        this.stopMonitoring();
                        this.startMonitoring();
                    }
                });
            }
            
            updateTime() {
                const now = new Date();
                const timeStr = now.toLocaleTimeString('hi-IN', { 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit',
                    hour12: false 
                });
                document.getElementById('currentTime').textContent = timeStr;
            }
            
            async setupPWA() {
                console.log('üîß PWA ‡§∏‡•á‡§ü‡§Ö‡§™ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');
                
                // Check if already installed
                if (this.isStandalone || window.navigator.standalone === true) {
                    console.log('üì± ‡§™‡§π‡§≤‡•á ‡§∏‡•á ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§π‡•à');
                    this.hideInstallUI();
                    return;
                }
                
                // Listen for beforeinstallprompt event
                window.addEventListener('beforeinstallprompt', (e) => {
                    console.log('üì± ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§™‡•ç‡§∞‡•â‡§Æ‡•ç‡§™‡•ç‡§ü ‡§â‡§™‡§≤‡§¨‡•ç‡§ß!');
                    e.preventDefault();
                    this.deferredPrompt = e;
                    
                    // Show install prompt after 2 seconds
                    setTimeout(() => {
                        if (this.deferredPrompt && !this.isStandalone) {
                            this.elements.installPrompt.classList.add('show');
                        }
                    }, 2000);
                });
                
                // Listen for appinstalled event
                window.addEventListener('appinstalled', (e) => {
                    console.log('üéâ ‡§ê‡§™ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§π‡•Å‡§Ü!');
                    this.isStandalone = true;
                    this.hideInstallUI();
                    this.showToast('‡§ê‡§™ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§π‡•Å‡§Ü!');
                    this.log('‡§ê‡§™ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§π‡•Å‡§Ü - ‡§Ö‡§¨ ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á‡§ó‡§æ');
                });
            }
            
            async setupServiceWorker() {
                if ('serviceWorker' in navigator) {
                    try {
                        this.serviceWorkerRegistration = await navigator.serviceWorker.register('/sw.js', {
                            scope: '/'
                        });
                        
                        console.log('‚úÖ ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞‡•ç‡§°:', this.serviceWorkerRegistration);
                        this.log('‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡§∞‡•ç‡§° - ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ');
                        
                        // Check if service worker is controlling the page
                        if (navigator.serviceWorker.controller) {
                            console.log('‚úÖ Service Worker is controlling the page');
                            this.log('‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§™‡•á‡§ú ‡§ï‡•ã ‡§ï‡§Ç‡§ü‡•ç‡§∞‡•ã‡§≤ ‡§ï‡§∞ ‡§∞‡§π‡§æ ‡§π‡•à');
                        }
                        
                    } catch (error) {
                        console.log('‚ùå ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§∞‡§ú‡§ø‡§∏‡•ç‡§ü‡•ç‡§∞‡•á‡§∂‡§® ‡§´‡•á‡§≤:', error);
                        this.log('‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§´‡•á‡§≤', true);
                    }
                } else {
                    this.log('‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§∏‡§™‡•ã‡§∞‡•ç‡§ü‡•á‡§° ‡§®‡§π‡•Ä‡§Ç', true);
                }
            }
            
            async setupHindiTTS() {
                if (!('speechSynthesis' in window)) {
                    this.updateStatus('tts', false, 'TTS ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç');
                    this.log('TTS ‡§∏‡§Æ‡§∞‡•ç‡§•‡§ø‡§§ ‡§®‡§π‡•Ä‡§Ç', true);
                    return;
                }
                
                // Wait for voices to load
                let voices = speechSynthesis.getVoices();
                if (voices.length === 0) {
                    await new Promise(resolve => {
                        speechSynthesis.addEventListener('voiceschanged', () => {
                            voices = speechSynthesis.getVoices();
                            resolve();
                        }, { once: true });
                    });
                }
                
                this.findHindiVoice(voices);
                
                setTimeout(() => {
                    if (this.hindiVoice) {
                        this.updateStatus('tts', true, '‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§â‡§™‡§≤‡§¨‡•ç‡§ß');
                        this.log('‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∏‡•á‡§ü‡§Ö‡§™ ‡§π‡•Å‡§à');
                    } else {
                        this.updateStatus('tts', true, '‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§â‡§™‡§≤‡§¨‡•ç‡§ß');
                        this.log('‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§®‡§π‡•Ä‡§Ç ‡§Æ‡§ø‡§≤‡•Ä, ‡§Ö‡§Ç‡§ó‡•ç‡§∞‡•á‡§ú‡•Ä ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó ‡§ï‡§∞‡•á‡§Ç‡§ó‡•á');
                    }
                }, 1000);
            }
            
            findHindiVoice(voices) {
                // Try to find Hindi voice
                const hindiVoices = voices.filter(voice => 
                    voice.lang.includes('hi') || 
                    voice.name.includes('Hindi') ||
                    voice.name.includes('India') ||
                    voice.name.includes('hi-IN')
                );
                
                if (hindiVoices.length > 0) {
                    this.hindiVoice = hindiVoices[0];
                    console.log('üé§ ‡§π‡§ø‡§Ç‡§¶‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§Æ‡§ø‡§≤‡•Ä:', this.hindiVoice.name);
                } else {
                    // Fallback to any Indian or English voice
                    const indianVoice = voices.find(v => v.lang.includes('IN'));
                    const englishVoice = voices.find(v => v.lang.startsWith('en'));
                    this.hindiVoice = indianVoice || englishVoice || voices[0];
                    console.log('üé§ ‡§µ‡•à‡§ï‡§≤‡•ç‡§™‡§ø‡§ï ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§ö‡•Å‡§®‡•Ä:', this.hindiVoice?.name);
                }
            }
            
            async checkBackend() {
                try {
                    const startTime = Date.now();
                    const response = await fetch(this.backendUrl);
                    
                    if (response.ok) {
                        const ping = Date.now() - startTime;
                        this.updateStatus('api', true, `‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§° (${ping}ms)`);
                        this.log(`‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§ï‡§®‡•á‡§ï‡•ç‡§ü‡•á‡§°: ${ping}ms`);
                    } else {
                        throw new Error(`HTTP ${response.status}`);
                    }
                } catch (error) {
                    this.updateStatus('api', false, '‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§µ‡§ø‡§´‡§≤');
                    this.log(`‡§¨‡•à‡§ï‡§è‡§Ç‡§° ‡§ï‡§®‡•á‡§ï‡•ç‡§∂‡§® ‡§´‡•á‡§≤: ${error.message}`, true);
                }
            }
            
            startMonitoring() {
                if (this.isMonitoring) return;
                
                this.isMonitoring = true;
                this.elements.startBtn.innerHTML = '<span class="btn-icon">‚è∏</span> ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∞‡•ã‡§ï‡•á‡§Ç';
                this.updateStatus('monitor', true, '‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à...');
                
                // Enable background if setting is on
                if (this.elements.backgroundToggle.checked) {
                    this.enableBackgroundMonitoring();
                }
                
                // Check immediately
                this.checkForNewPayments();
                
                // Set interval for checking (2 seconds by default)
                const interval = parseInt(this.elements.intervalSelect.value);
                this.monitorInterval = setInterval(() => {
                    this.checkForNewPayments();
                }, interval);
                
                this.showToast('‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§à - ‡§π‡§∞ ' + (interval/1000) + ' ‡§∏‡•á‡§ï‡§Ç‡§° ‡§Æ‡•á‡§Ç ‡§ö‡•á‡§ï');
                this.log(`‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∂‡•Å‡§∞‡•Ç ‡§π‡•Å‡§à (${interval}ms ‡§Ö‡§Ç‡§§‡§∞‡§æ‡§≤)`);
            }
            
            stopMonitoring() {
                this.isMonitoring = false;
                this.elements.startBtn.innerHTML = '<span class="btn-icon">‚ñ∂</span> ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∂‡•Å‡§∞‡•Ç';
                this.updateStatus('monitor', false, '‡§¨‡§Ç‡§¶ ‡§π‡•à');
                
                // Disable background
                this.disableBackgroundMonitoring();
                
                if (this.monitorInterval) {
                    clearInterval(this.monitorInterval);
                    this.monitorInterval = null;
                }
                
                this.showToast('‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∞‡•ã‡§ï‡•Ä ‡§ó‡§à');
                this.log('‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∞‡•ã‡§ï‡•Ä ‡§ó‡§à');
            }
            
            async enableBackgroundMonitoring() {
                if (!this.serviceWorkerRegistration) {
                    this.log('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§®‡§π‡•Ä‡§Ç: ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞ ‡§®‡§π‡•Ä‡§Ç', true);
                    return false;
                }
                
                try {
                    // Request notification permission
                    const permission = await Notification.requestPermission();
                    if (permission !== 'granted') {
                        this.log('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§®‡§π‡•Ä‡§Ç: ‡§®‡•ã‡§ü‡§ø‡§´‡§ø‡§ï‡•á‡§∂‡§® ‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø ‡§®‡§π‡•Ä‡§Ç', true);
                        return false;
                    }
                    
                    // Tell service worker to start background monitoring
                    if (this.serviceWorkerRegistration.active) {
                        this.serviceWorkerRegistration.active.postMessage({
                            type: 'START_BACKGROUND',
                            backendUrl: this.backendUrl
                        });
                    }
                    
                    this.isBackgroundActive = true;
                    this.elements.backgroundBtn.innerHTML = '<span class="btn-icon">‚úÖ</span> ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§ö‡§æ‡§≤‡•Ç';
                    this.elements.backgroundBtn.style.background = 'linear-gradient(135deg, #10b981, #059669)';
                    
                    this.log('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∏‡§ï‡•ç‡§∑‡§Æ - ‡§ê‡§™ ‡§¨‡§Ç‡§¶ ‡§π‡•ã‡§®‡•á ‡§™‡§∞ ‡§≠‡•Ä ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡•á‡§ó‡§æ');
                    this.showToast('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§∏‡§ï‡•ç‡§∑‡§Æ');
                    
                    return true;
                    
                } catch (error) {
                    console.error('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§è‡§∞‡§∞:', error);
                    this.log('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§∏‡§ï‡•ç‡§∑‡§Æ ‡§®‡§π‡•Ä‡§Ç: ' + error.message, true);
                    return false;
                }
            }
            
            disableBackgroundMonitoring() {
                if (this.serviceWorkerRegistration && this.serviceWorkerRegistration.active) {
                    this.serviceWorkerRegistration.active.postMessage({
                        type: 'STOP_BACKGROUND'
                    });
                }
                
                this.isBackgroundActive = false;
                this.elements.backgroundBtn.innerHTML = '<span class="btn-icon">üîÑ</span> ‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°';
                this.elements.backgroundBtn.style.background = 'linear-gradient(135deg, #06b6d4, #0e7490)';
                
                this.log('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§° ‡§®‡§ø‡§ó‡§∞‡§æ‡§®‡•Ä ‡§Ö‡§ï‡•ç‡§∑‡§Æ');
            }
            
            toggleBackgroundMonitoring() {
                if (this.isBackgroundActive) {
                    this.disableBackgroundMonitoring();
                } else {
                    this.enableBackgroundMonitoring();
                }
            }
            
            async checkForNewPayments() {
                try {
                    const response = await fetch(`${this.backendUrl}/api/check-new-sms`);
                    const data = await response.json();
                    
                    if (data.success && data.announcements?.length > 0) {
                        this.log(`${data.announcements.length} ‡§®‡§Ø‡§æ SMS ‡§Æ‡§ø‡§≤‡§æ`);
                        
                        for (const payment of data.announcements) {
                            if (!this.announcedIds.has(payment.id)) {
                                await this.processSMSAnnouncement(payment);
                                this.announcedIds.add(payment.id);
                                
                                // Mark as announced on backend
                                await fetch(`${this.backendUrl}/api/mark-announced`, {
                                    method: 'POST',
                                    headers: {'Content-Type': 'application/json'},
                                    body: JSON.stringify({ announcementId: payment.id })
                                });
                            }
                        }
                    }
                    
                    // Update last check time
                    const now = new Date();
                    const statusText = this.isBackgroundActive 
                        ? `‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à (‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°) - ${now.toLocaleTimeString('hi-IN', {hour: '2-digit', minute: '2-digit'})}`
                        : `‡§ö‡§≤ ‡§∞‡§π‡§æ ‡§π‡•à - ${now.toLocaleTimeString('hi-IN', {hour: '2-digit', minute: '2-digit'})}`;
                    
                    this.elements.monitorStatusText.textContent = statusText;
                    
                } catch (error) {
                    this.log(`‡§ö‡•á‡§ï ‡§è‡§∞‡§∞: ${error.message}`, true);
                }
            }
            
            async processSMSAnnouncement(payment) {
                const { amount, sender, bank, timestamp, originalSMS } = payment;
                const smsText = originalSMS || '';
                
                // Analyze SMS content and create appropriate announcement
                const announcement = this.createSmartAnnouncement(smsText, amount, sender);
                
                // Add to UI
                this.addPaymentToUI(payment, announcement.type);
                
                // Play TTS if enabled
                if (this.elements.voiceToggle.checked) {
                    await this.playHindiTTS(announcement.message);
                }
                
                // Show notification
                if (Notification.permission === 'granted') {
                    new Notification(announcement.title, {
                        body: announcement.message,
                        icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHJlY3Qgd2lkdGg9IjE5MiIgaGVpZ2h0PSIxOTIiIHJ4PSI5NiIgZmlsbD0iIzEwYjk4MSIvPjx0ZXh0IHg9Ijk2IiB5PSIxMDAiIGZvbnQtc2l6ZT0iODAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIGR5PSIuM2VtIiBmaWxsPSJ3aGl0ZSI+8J+SsDwvdGV4dD48L3N2Zz4='
                    });
                }
                
                // Show toast
                this.showToast(announcement.message);
                
                this.log(`${announcement.type}: ‚Çπ${amount} - ${sender}`);
            }
            
            createSmartAnnouncement(smsText, amount, sender) {
                // Convert SMS to lowercase for analysis
                const text = smsText.toLowerCase();
                
                // Check for CREDIT transaction
                if (text.includes('prapt') || text.includes('credited') || text.includes('received') || 
                    text.includes('aapke') || text.includes('‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§') || text.includes('‡§ú‡§Æ‡§æ')) {
                    
                    // Extract name from SMS
                    let name = this.extractNameFromSMS(text);
                    
                    return {
                        type: 'CREDIT',
                        title: 'üí∞ ‡§®‡§Ø‡§æ ‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü',
                        message: `‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ${this.convertToHindiNumbers(amount)} ‡§∞‡•Å‡§™‡§Ø‡•á ${name || sender} ‡§ï‡•á ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§è`
                    };
                }
                
                // Check for DEBIT transaction
                else if (text.includes('debit') || text.includes('nikale') || text.includes('kharch') || 
                         text.includes('transfer') || text.includes('‡§®‡§ø‡§ï‡§æ‡§≤‡•á') || text.includes('‡§ñ‡§∞‡•ç‡§ö')) {
                    
                    let name = this.extractNameFromSMS(text);
                    
                    return {
                        type: 'DEBIT',
                        title: 'üí∏ ‡§®‡§Ø‡§æ ‡§°‡•á‡§¨‡§ø‡§ü',
                        message: `‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§∏‡•á ${this.convertToHindiNumbers(amount)} ‡§∞‡•Å‡§™‡§Ø‡•á ${name || sender} ‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§ü‡•ç‡§∞‡§æ‡§Ç‡§∏‡§´‡§∞ ‡§π‡•Å‡§è`
                    };
                }
                
                // Default announcement
                return {
                    type: 'PAYMENT',
                    title: 'üí≥ ‡§®‡§Ø‡§æ ‡§≠‡•Å‡§ó‡§§‡§æ‡§®',
                    message: `${this.convertToHindiNumbers(amount)} ‡§∞‡•Å‡§™‡§Ø‡•á ‡§ï‡§æ ‡§≠‡•Å‡§ó‡§§‡§æ‡§® ${sender} ‡§∏‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§Ü`
                };
            }
            
            extractNameFromSMS(smsText) {
                // Simple name extraction logic
                const text = smsText.toLowerCase();
                
                // Common patterns in Hindi SMS
                const namePatterns = {
                    'rahul': '‡§∞‡§æ‡§π‡•Å‡§≤',
                    'amit': '‡§Ö‡§Æ‡§ø‡§§',
                    'rohan': '‡§∞‡•ã‡§π‡§®',
                    'priya': '‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ',
                    'neha': '‡§®‡•á‡§π‡§æ',
                    'sanjay': '‡§∏‡§Ç‡§ú‡§Ø',
                    'vikas': '‡§µ‡§ø‡§ï‡§æ‡§∏',
                    'anil': '‡§Ö‡§®‡§ø‡§≤',
                    'sunil': '‡§∏‡•Å‡§®‡•Ä‡§≤',
                    'mohan': '‡§Æ‡•ã‡§π‡§®'
                };
                
                for (const [english, hindi] of Object.entries(namePatterns)) {
                    if (text.includes(english)) {
                        return hindi;
                    }
                }
                
                return null;
            }
            
            convertToHindiNumbers(amount) {
                // Convert English numbers to Hindi numbers
                const englishNumbers = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9'];
                const hindiNumbers = ['‡•¶', '‡•ß', '‡•®', '‡•©', '‡•™', '‡•´', '‡•¨', '‡•≠', '‡•Æ', '‡•Ø'];
                
                return amount.toString().split('').map(char => {
                    const index = englishNumbers.indexOf(char);
                    return index !== -1 ? hindiNumbers[index] : char;
                }).join('');
            }
            
            async playHindiTTS(text) {
                if (!('speechSynthesis' in window) || this.isSpeaking) {
                    return;
                }
                
                return new Promise((resolve) => {
                    const utterance = new SpeechSynthesisUtterance(text);
                    
                    // Configure for Hindi/Indian voice
                    if (this.hindiVoice) {
                        utterance.voice = this.hindiVoice;
                        utterance.lang = this.hindiVoice.lang || 'hi-IN';
                    } else {
                        utterance.lang = 'hi-IN';
                    }
                    
                    // Adjust speech parameters for better Hindi pronunciation
                    utterance.rate = 0.85; // Slower for clarity
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;
                    
                    utterance.onstart = () => {
                        this.isSpeaking = true;
                    };
                    
                    utterance.onend = () => {
                        this.isSpeaking = false;
                        resolve();
                    };
                    
                    utterance.onerror = (event) => {
                        console.warn('TTS Error:', event.error);
                        this.isSpeaking = false;
                        resolve();
                    };
                    
                    // Add small delay to prevent overlap
                    setTimeout(() => {
                        try {
                            speechSynthesis.speak(utterance);
                        } catch (error) {
                            console.warn('Speech synthesis failed:', error);
                            this.isSpeaking = false;
                            resolve();
                        }
                    }, 100);
                });
            }
            
            addPaymentToUI(payment, type = 'CREDIT') {
                const { amount, sender, bank, timestamp, id } = payment;
                
                // Remove empty state if present
                const emptyState = this.elements.paymentsList.querySelector('.empty-state');
                if (emptyState) {
                    emptyState.remove();
                }
                
                // Determine color based on type
                let borderColor = '#10b981'; // Green for credit
                let typeText = '‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü';
                let typeIcon = 'üí≥';
                
                if (type === 'DEBIT') {
                    borderColor = '#ef4444'; // Red for debit
                    typeText = '‡§°‡•á‡§¨‡§ø‡§ü';
                    typeIcon = 'üí∏';
                }
                
                // Create payment element
                const div = document.createElement('div');
                div.className = `payment-card ${type.toLowerCase()}`;
                div.id = `payment-${id}`;
                div.style.borderLeftColor = borderColor;
                
                const time = new Date(timestamp).toLocaleTimeString('hi-IN', { hour: '2-digit', minute: '2-digit' });
                const date = new Date(timestamp).toLocaleDateString('hi-IN');
                
                div.innerHTML = `
                    <div class="payment-header">
                        <div style="display: flex; align-items: center; gap: 15px;">
                            <div style="font-size: 28px;">${typeIcon}</div>
                            <div>
                                <div class="payment-amount">‚Çπ${amount}</div>
                                <div style="font-size: 14px; color: ${borderColor}; font-weight: bold; text-shadow: 0 0 5px ${borderColor}40;">${typeText}</div>
                            </div>
                        </div>
                        <div class="payment-sender">${sender}</div>
                    </div>
                    <div class="payment-details">
                        <div><strong>‡§¨‡•à‡§Ç‡§ï:</strong> ${bank || '‡§Ö‡§ú‡•ç‡§û‡§æ‡§§'}</div>
                        <div><strong>‡§∏‡§Æ‡§Ø:</strong> ${time}</div>
                        <div><strong>‡§§‡§æ‡§∞‡•Ä‡§ñ:</strong> ${date}</div>
                    </div>
                `;
                
                // Add to top
                this.elements.paymentsList.prepend(div);
                
                // Update count
                const count = this.elements.paymentsList.children.length;
                this.elements.paymentCount.textContent = count;
                
                // Keep only 20 payments
                if (count > 20) {
                    this.elements.paymentsList.lastChild.remove();
                }
            }
            
            testCreditAnnouncement() {
                const testSMS = "‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç 5000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§è‡•§ ‡§≠‡•á‡§ú‡§®‡•á ‡§µ‡§æ‡§≤‡§æ: Rahul";
                const testPayment = {
                    id: `test_credit_${Date.now()}`,
                    amount: 5000,
                    sender: '‡§∞‡§æ‡§π‡•Å‡§≤',
                    bank: '‡§è‡§∏‡§¨‡•Ä‡§Ü‡§à ‡§¨‡•à‡§Ç‡§ï',
                    timestamp: new Date().toISOString(),
                    originalSMS: testSMS
                };
                
                this.processSMSAnnouncement(testPayment);
                this.log('‡§ï‡•ç‡§∞‡•á‡§°‡§ø‡§ü ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ò‡•ã‡§∑‡§£‡§æ');
            }
            
            testDebitAnnouncement() {
                const testSMS = "‡§Ü‡§™‡§ï‡•á ‡§ñ‡§æ‡§§‡•á ‡§∏‡•á 1000 ‡§∞‡•Å‡§™‡§Ø‡•á ‡§®‡§ø‡§ï‡§æ‡§≤‡•á ‡§ó‡§è‡•§ ‡§™‡•ç‡§∞‡§æ‡§™‡•ç‡§§ ‡§ï‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡§æ: Priya";
                const testPayment = {
                    id: `test_debit_${Date.now()}`,
                    amount: 1000,
                    sender: '‡§™‡•ç‡§∞‡§ø‡§Ø‡§æ',
                    bank: '‡§è‡§ö‡§°‡•Ä‡§è‡§´‡§∏‡•Ä ‡§¨‡•à‡§Ç‡§ï',
                    timestamp: new Date().toISOString(),
                    originalSMS: testSMS
                };
                
                this.processSMSAnnouncement(testPayment);
                this.log('‡§°‡•á‡§¨‡§ø‡§ü ‡§ü‡•á‡§∏‡•ç‡§ü ‡§ò‡•ã‡§∑‡§£‡§æ');
            }
            
            installPWA() {
                if (!this.deferredPrompt) {
                    this.showToast('‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§®‡§π‡•Ä‡§Ç');
                    return;
                }
                
                console.log('üì± ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§ü‡•ç‡§∞‡§ø‡§ó‡§∞ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');
                this.deferredPrompt.prompt();
                
                this.deferredPrompt.userChoice.then((choiceResult) => {
                    console.log('‡§Ø‡•Ç‡§ú‡§∞ ‡§ö‡•ç‡§µ‡§æ‡§á‡§∏:', choiceResult.outcome);
                    this.deferredPrompt = null;
                    
                    if (choiceResult.outcome === 'accepted') {
                        this.hideInstallUI();
                        this.showToast('‡§ê‡§™ ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤ ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...');
                    }
                });
            }
            
            hideInstallPrompt() {
                this.elements.installPrompt.classList.remove('show');
            }
            
            hideInstallUI() {
                this.elements.installPrompt.classList.remove('show');
            }
            
            clearPayments() {
                this.elements.paymentsList.innerHTML = `
                    <div style="text-align: center; padding: 60px 20px; color: #64748b;">
                        <div style="font-size: 72px; margin-bottom: 25px; opacity: 0.5;">üì≠</div>
                        <p style="font-size: 20px; margin-bottom: 15px;">‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§®‡§π‡•Ä‡§Ç</p>
                        <small>‡§ú‡•à‡§∏‡•á ‡§π‡•Ä ‡§®‡§Ø‡§æ SMS ‡§Ü‡§è‡§ó‡§æ, ‡§Ø‡§π‡§æ‡§Å ‡§¶‡§ø‡§ñ‡•á‡§ó‡§æ</small>
                    </div>
                `;
                this.elements.paymentCount.textContent = '0';
                this.announcedIds.clear();
                this.log('‡§∏‡§≠‡•Ä ‡§≤‡•á‡§®-‡§¶‡•á‡§® ‡§∏‡§æ‡§´‡§º ‡§ï‡§ø‡§è ‡§ó‡§è');
            }
            
            clearLogs() {
                this.elements.logsList.innerHTML = `
                    <div class="log-entry" style="color: #10b981;">
                        <span class="log-time">[<span id="currentTime">${new Date().toLocaleTimeString('hi-IN', {hour: '2-digit', minute: '2-digit', second: '2-digit'})}</span>]</span>
                        <span>‡§≤‡•â‡§ó ‡§∏‡§æ‡§´‡§º ‡§ï‡§ø‡§è ‡§ó‡§è</span>
                    </div>
                `;
            }
            
            updateStatus(type, success, message) {
                const box = this.elements[`${type}Box`];
                const text = this.elements[`${type}Text`];
                
                if (box && text) {
                    box.classList.remove('active', 'inactive', 'waiting');
                    box.classList.add(success ? 'active' : 'inactive');
                    text.textContent = message;
                }
            }
            
            log(message, isError = false) {
                const time = new Date().toLocaleTimeString('hi-IN', { 
                    hour: '2-digit', 
                    minute: '2-digit', 
                    second: '2-digit',
                    hour12: false 
                });
                
                const div = document.createElement('div');
                div.className = 'log-entry';
                div.style.color = isError ? '#f87171' : '#34d399';
                div.innerHTML = `<span class="log-time">[${time}]</span> <span>${message}</span>`;
                
                this.elements.logsList.prepend(div);
                
                // Keep only 50 logs
                if (this.elements.logsList.children.length > 50) {
                    this.elements.logsList.removeChild(this.elements.logsList.lastChild);
                }
            }
            
            showToast(message) {
                const toast = this.elements.toast;
                toast.textContent = message;
                toast.style.display = 'block';
                
                setTimeout(() => {
                    toast.style.display = 'none';
                }, 3000);
            }
            
            loadSettings() {
                this.elements.autoStartToggle.checked = localStorage.getItem('autoStart') !== 'false';
                this.elements.voiceToggle.checked = localStorage.getItem('autoVoice') !== 'false';
                this.elements.backgroundToggle.checked = localStorage.getItem('backgroundEnabled') !== 'false';
                
                const interval = localStorage.getItem('checkInterval') || '2000';
                this.elements.intervalSelect.value = interval;
            }
        }
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', () => {
            // Create app instance
            window.app = new SmartPaymentAnnouncer();
            
            // Debug function
            window.debugApp = function() {
                console.log('=== ‡§ê‡§™ ‡§°‡•Ä‡§¨‡§ó ===');
                console.log('‡§¨‡•à‡§ï‡§è‡§Ç‡§° URL:', window.app.backendUrl);
                console.log('PWA ‡§á‡§Ç‡§∏‡•ç‡§ü‡•â‡§≤‡•ç‡§°:', window.app.isStandalone);
                console.log('‡§¨‡•à‡§ï‡§ó‡•ç‡§∞‡§æ‡§â‡§Ç‡§°:', window.app.isBackgroundActive);
                console.log('‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏ ‡§µ‡§∞‡•ç‡§ï‡§∞:', window.app.serviceWorkerRegistration);
                console.log('TTS Voice:', window.app.hindiVoice);
            };
        });
    </script>
</body>
</html>
